model Product {
    id           Int       @id @default(autoincrement())
    basePrice    Float
    virtualPrice Float
    brandId      Int
    createdAt    DateTime  @default(now())
    updatedAt    DateTime  @updatedAt
    deletedAt    DateTime?

    brand Brand @relation(fields: [brandId], references: [id])

    productTranslations ProductTranslation[]
    variants            Variant[]
    skus                Sku[]
    categories          ProductCategory[]
    reviews             Review[]
}

model ProductCategory {
    productId  Int
    categoryId Int

    product  Product  @relation(fields: [productId], references: [id])
    category Category @relation(fields: [categoryId], references: [id])

    @@id([productId, categoryId])
}

model ProductSkuSnapshot {
    id          Int       @id @default(autoincrement())
    productName String
    price       Float
    images      String[]
    skuValue    String
    skuId       Int
    orderId     Int
    createdAt   DateTime  @default(now())
    updatedAt   DateTime  @updatedAt
    deletedAt   DateTime?

    sku   Sku   @relation(fields: [skuId], references: [id])
    order Order @relation(fields: [orderId], references: [id])
}

model Order {
    id        Int         @id @default(autoincrement())
    userId    Int
    status    OrderStatus
    createdAt DateTime    @default(now())
    updatedAt DateTime    @updatedAt
    deletedAt DateTime?

    user               User                 @relation(fields: [userId], references: [id])
    productSkuSnapshot ProductSkuSnapshot[]
}

model CartItem {
    id        Int       @id @default(autoincrement())
    quantity  Int
    skuId     Int
    userId    Int
    createdAt DateTime  @default(now())
    updatedAt DateTime  @updatedAt
    deletedAt DateTime?

    sku  Sku  @relation(fields: [skuId], references: [id])
    user User @relation(fields: [userId], references: [id])
}

model Review {
    id        Int       @id @default(autoincrement())
    content   String
    rating    Int
    productId Int
    userId    Int
    createdAt DateTime  @default(now())
    updatedAt DateTime  @updatedAt
    deletedAt DateTime?

    product Product @relation(fields: [productId], references: [id])
    user    User    @relation(fields: [userId], references: [id])
}
