model Role {
    id        Int       @id @default(autoincrement())
    name      RoleEnum  @unique
    desc      String?
    createdAt DateTime  @default(now())
    updatedAt DateTime  @updatedAt
    deletedAt DateTime?

    users           User[]
    permissionRoles PermissionRole[]
}

model Permission {
    id          Int        @id @default(autoincrement())
    name        String
    description String?
    path        String
    method      HttpMethod
    createdAt   DateTime   @default(now())
    updatedAt   DateTime   @updatedAt
    deletedAt   DateTime?

    permissionRoles PermissionRole[]
}

model PermissionRole {
    roleId       Int
    permissionId Int

    role       Role       @relation(fields: [roleId], references: [id])
    permission Permission @relation(fields: [permissionId], references: [id])

    @@id([roleId, permissionId])
}

model VerificationCode {
    id        Int              @id @default(autoincrement())
    email     String           @unique
    code      String
    type      VerificationType
    createdAt DateTime         @default(now())
    expireAt  DateTime

    @@index([email, code, type])
}

model PaymentTransaction {
    id                 Int      @id @default(autoincrement())
    gateway            String
    accountNumber      String
    subAccount         String?
    amountIn           Int      @default(0)
    amountOut          Int      @default(0)
    accumulated        Int      @default(0)
    code               String?
    transactionContent String?
    referenceNumber    String?
    body               String?
    transactionDate    DateTime @default(now())
    createdAt          DateTime @default(now())
}
